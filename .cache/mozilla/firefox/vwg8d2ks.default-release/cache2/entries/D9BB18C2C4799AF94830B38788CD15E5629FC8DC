{"name": "2_5420530662090213561.ipynb", "path": "\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0438/23-09-2020_09-05-29/2_5420530662090213561.ipynb", "last_modified": "1979-11-29T21:00:00Z", "created": "2020-09-23T06:11:55.959327Z", "content": {"cells": [{"cell_type": "markdown", "metadata": {}, "source": "<p style=\"font-family: Arial; font-size:3.75em;color:purple; font-style:bold\"><br>\nIntroduction to numpy:\n</p><br>\n\n<p style=\"font-family: Arial; font-size:1.25em;color:#2462C0; font-style:bold\"><br>\nPackage for scientific computing with Python\n</p><br>\n\nNumerical Python, or \"Numpy\" for short, is a foundational package on which many of the most common data science packages are built.  Numpy provides us with high performance multi-dimensional arrays which we can use as vectors or matrices.  \n\nThe key features of numpy are:\n\n- ndarrays: n-dimensional arrays of the same data type which are fast and space-efficient.  There are a number of built-in methods for ndarrays which allow for rapid processing of data without using loops (e.g., compute the mean).\n- Broadcasting: a useful tool which defines implicit behavior between multi-dimensional arrays of different sizes.\n- Vectorization: enables numeric operations on ndarrays.\n- Input/Output: simplifies reading and writing of data from/to file.\n\n<b>Additional Recommended Resources:</b><br>\n<a href=\"https://docs.scipy.org/doc/numpy/reference/\">Numpy Documentation</a><br>\n<i>Python for Data Analysis</i> by Wes McKinney<br>\n<i>Python Data science Handbook</i> by Jake VanderPlas\n\n"}, {"cell_type": "markdown", "metadata": {}, "source": "<p style=\"font-family: Arial; font-size:2.75em;color:purple; font-style:bold\"><br>\n\nGetting started with ndarray<br><br></p>\n\n**ndarrays** are time and space-efficient multidimensional arrays at the core of numpy.  Like the data structures in Week 2, let's get started by creating ndarrays using the numpy package."}, {"cell_type": "markdown", "metadata": {}, "source": "<p style=\"font-family: Arial; font-size:1.75em;color:#2462C0; font-style:bold\"><br>\n\nHow to create Rank 1 numpy arrays:\n</p>"}, {"cell_type": "code", "execution_count": 1, "metadata": {"trusted": false}, "outputs": [{"name": "stdout", "output_type": "stream", "text": "<class 'numpy.ndarray'>\n"}], "source": "import numpy as np\n\nan_array = np.array([3, 33, 333])  # Create a rank 1 array\n\nprint(type(an_array))              # The type of an ndarray is: \"<class 'numpy.ndarray'>\""}, {"cell_type": "code", "execution_count": 2, "metadata": {"trusted": false}, "outputs": [{"name": "stdout", "output_type": "stream", "text": "(3,)\n"}], "source": "# test the shape of the array we just created, it should have just one dimension (Rank 1)\nprint(an_array.shape)"}, {"cell_type": "code", "execution_count": 3, "metadata": {"trusted": false}, "outputs": [{"name": "stdout", "output_type": "stream", "text": "3 33 333\n"}], "source": "# because this is a 1-rank array, we need only one index to accesss each element\nprint(an_array[0], an_array[1], an_array[2]) "}, {"cell_type": "code", "execution_count": 7, "metadata": {"trusted": false}, "outputs": [{"name": "stdout", "output_type": "stream", "text": "[888  33 333]\n"}], "source": "an_array[0] = 888         # ndarrays are mutable, here we change an element of the array\n\nprint(an_array)"}, {"cell_type": "markdown", "metadata": {}, "source": "<p style=\"font-family: Arial; font-size:1.75em;color:#2462C0; font-style:bold\"><br>\n\nHow to create a Rank 2 numpy array:</p>\n\nA rank 2 **ndarray** is one with two dimensions.  Notice the format below of [ [row] , [row] ].  2 dimensional arrays are great for representing matrices which are often useful in data science."}, {"cell_type": "code", "execution_count": 8, "metadata": {"trusted": false}, "outputs": [{"name": "stdout", "output_type": "stream", "text": "[[11 12 13]\n [21 22 23]]\nThe shape is 2 rows, 3 columns:  (2, 3)\nAccessing elements [0,0], [0,1], and [1,0] of the ndarray:  11 ,  12 ,  21\n"}], "source": "another = np.array([[11,12,13],[21,22,23]])   # Create a rank 2 array\n\nprint(another)  # print the array\n\nprint(\"The shape is 2 rows, 3 columns: \", another.shape)  # rows x columns                   \n\nprint(\"Accessing elements [0,0], [0,1], and [1,0] of the ndarray: \", another[0, 0], \", \",another[0, 1],\", \", another[1, 0])"}, {"cell_type": "markdown", "metadata": {}, "source": "<p style=\"font-family: Arial; font-size:1.75em;color:#2462C0; font-style:bold\"><br>\n\nThere are many way to create numpy arrays:\n</p>\n\nHere we create a number of different size arrays with different shapes and different pre-filled values.  numpy has a number of built in methods which help us quickly and easily create multidimensional arrays."}, {"cell_type": "code", "execution_count": 9, "metadata": {"trusted": false}, "outputs": [{"name": "stdout", "output_type": "stream", "text": "[[0. 0.]\n [0. 0.]]\n"}], "source": "import numpy as np\n\n# create a 2x2 array of zeros\nex1 = np.zeros((2,2))      \nprint(ex1)                              "}, {"cell_type": "code", "execution_count": 10, "metadata": {"trusted": false}, "outputs": [{"name": "stdout", "output_type": "stream", "text": "[[9. 9.]\n [9. 9.]]\n"}], "source": "# create a 2x2 array filled with 9.0\nex2 = np.full((2,2), 9.0)  \nprint(ex2)   "}, {"cell_type": "code", "execution_count": 11, "metadata": {"trusted": false}, "outputs": [{"name": "stdout", "output_type": "stream", "text": "[[1. 0.]\n [0. 1.]]\n"}], "source": "# create a 2x2 matrix with the diagonal 1s and the others 0\nex3 = np.eye(2,2)\nprint(ex3)  "}, {"cell_type": "code", "execution_count": 12, "metadata": {"trusted": false}, "outputs": [{"name": "stdout", "output_type": "stream", "text": "[[1. 1.]]\n"}], "source": "# create an array of ones\nex4 = np.ones((1,2))\nprint(ex4)    "}, {"cell_type": "code", "execution_count": 13, "metadata": {"trusted": false}, "outputs": [{"name": "stdout", "output_type": "stream", "text": "(1, 2)\n\n1.0\n"}], "source": "# notice that the above ndarray (ex4) is actually rank 2, it is a 2x1 array\nprint(ex4.shape)\n\n# which means we need to use two indexes to access an element\nprint()\nprint(ex4[0,1])"}, {"cell_type": "code", "execution_count": 14, "metadata": {"trusted": false}, "outputs": [{"name": "stdout", "output_type": "stream", "text": "[[0.88383989 0.82547987]\n [0.80905534 0.66858952]]\n"}], "source": "# create an array of random floats between 0 and 1\nex5 = np.random.random((2,2))\nprint(ex5)    "}, {"cell_type": "markdown", "metadata": {}, "source": "<p style=\"font-family: Arial; font-size:2.75em;color:purple; font-style:bold\"><br>\n\nArray Indexing\n<br><br></p>"}, {"cell_type": "markdown", "metadata": {}, "source": "<p style=\"font-family: Arial; font-size:1.75em;color:#2462C0; font-style:bold\"><br>\nSlice indexing:\n</p>\n\nSimilar to the use of slice indexing with lists and strings, we can use slice indexing to pull out sub-regions of ndarrays."}, {"cell_type": "code", "execution_count": 15, "metadata": {"trusted": false}, "outputs": [{"name": "stdout", "output_type": "stream", "text": "[[11 12 13 14]\n [21 22 23 24]\n [31 32 33 34]]\n"}], "source": "import numpy as np\n\n# Rank 2 array of shape (3, 4)\nan_array = np.array([[11,12,13,14], [21,22,23,24], [31,32,33,34]])\nprint(an_array)"}, {"cell_type": "markdown", "metadata": {}, "source": "Use array slicing to get a subarray consisting of the first 2 rows x 2 columns."}, {"cell_type": "code", "execution_count": 16, "metadata": {"trusted": false}, "outputs": [{"name": "stdout", "output_type": "stream", "text": "[[12 13]\n [22 23]]\n"}], "source": "a_slice = an_array[:2, 1:3]\nprint(a_slice)"}, {"cell_type": "markdown", "metadata": {}, "source": "When you modify a slice, you actually modify the underlying array."}, {"cell_type": "code", "execution_count": 17, "metadata": {"trusted": false}, "outputs": [{"name": "stdout", "output_type": "stream", "text": "Before: 12\nAfter: 1000\n"}], "source": "print(\"Before:\", an_array[0, 1])   #inspect the element at 0, 1  \na_slice[0, 0] = 1000    # a_slice[0, 0] is the same piece of data as an_array[0, 1]\nprint(\"After:\", an_array[0, 1])    "}, {"cell_type": "markdown", "metadata": {}, "source": "<p style=\"font-family: Arial; font-size:1.75em;color:#2462C0; font-style:bold\"><br>\n\nUse both integer indexing & slice indexing\n</p>\n\nWe can use combinations of integer indexing and slice indexing to create different shaped matrices."}, {"cell_type": "code", "execution_count": 18, "metadata": {"trusted": false}, "outputs": [{"name": "stdout", "output_type": "stream", "text": "[[11 12 13 14]\n [21 22 23 24]\n [31 32 33 34]]\n"}], "source": "# Create a Rank 2 array of shape (3, 4)\nan_array = np.array([[11,12,13,14], [21,22,23,24], [31,32,33,34]])\nprint(an_array)"}, {"cell_type": "code", "execution_count": 19, "metadata": {"trusted": false}, "outputs": [{"name": "stdout", "output_type": "stream", "text": "[21 22 23 24] (4,)\n"}], "source": "# Using both integer indexing & slicing generates an array of lower rank\nrow_rank1 = an_array[1, :]    # Rank 1 view \n\nprint(row_rank1, row_rank1.shape)  # notice only a single []"}, {"cell_type": "code", "execution_count": 20, "metadata": {"trusted": false}, "outputs": [{"name": "stdout", "output_type": "stream", "text": "[[21 22 23 24]] (1, 4)\n"}], "source": "# Slicing alone: generates an array of the same rank as the an_array\nrow_rank2 = an_array[1:2, :]  # Rank 2 view \n\nprint(row_rank2, row_rank2.shape)   # Notice the [[ ]]"}, {"cell_type": "code", "execution_count": 21, "metadata": {"trusted": false}, "outputs": [{"name": "stdout", "output_type": "stream", "text": "\n[12 22 32] (3,)\n\n[[12]\n [22]\n [32]] (3, 1)\n"}], "source": "#We can do the same thing for columns of an array:\n\nprint()\ncol_rank1 = an_array[:, 1]\ncol_rank2 = an_array[:, 1:2]\n\nprint(col_rank1, col_rank1.shape)  # Rank 1\nprint()\nprint(col_rank2, col_rank2.shape)  # Rank 2"}, {"cell_type": "markdown", "metadata": {}, "source": "<p style=\"font-family: Arial; font-size:1.75em;color:#2462C0; font-style:bold\"><br>\n\nArray Indexing for changing elements:\n</p>"}, {"cell_type": "markdown", "metadata": {}, "source": "Sometimes it's useful to use an array of indexes to access or change elements."}, {"cell_type": "code", "execution_count": 22, "metadata": {"trusted": false}, "outputs": [{"name": "stdout", "output_type": "stream", "text": "Original Array:\n[[11 12 13]\n [21 22 23]\n [31 32 33]\n [41 42 43]]\n"}], "source": "# Create a new array\nan_array = np.array([[11,12,13], [21,22,23], [31,32,33], [41,42,43]])\n\nprint('Original Array:')\nprint(an_array)"}, {"cell_type": "code", "execution_count": 23, "metadata": {"trusted": false}, "outputs": [{"name": "stdout", "output_type": "stream", "text": "\nCol indices picked :  [0 1 2 0]\n\nRows indices picked :  [0 1 2 3]\n"}], "source": "# Create an array of indices\ncol_indices = np.array([0, 1, 2, 0])\nprint('\\nCol indices picked : ', col_indices)\n\nrow_indices = np.arange(4)\nprint('\\nRows indices picked : ', row_indices)"}, {"cell_type": "code", "execution_count": 24, "metadata": {"trusted": false}, "outputs": [{"name": "stdout", "output_type": "stream", "text": "0 ,  0\n1 ,  1\n2 ,  2\n3 ,  0\n"}], "source": "# Examine the pairings of row_indices and col_indices.  These are the elements we'll change next.\nfor row,col in zip(row_indices,col_indices):\n    print(row, \", \",col)"}, {"cell_type": "code", "execution_count": 25, "metadata": {"trusted": false}, "outputs": [{"name": "stdout", "output_type": "stream", "text": "Values in the array at those indices:  [11 22 33 41]\n"}], "source": "# Select one element from each row\nprint('Values in the array at those indices: ',an_array[row_indices, col_indices])"}, {"cell_type": "code", "execution_count": 26, "metadata": {"trusted": false}, "outputs": [{"name": "stdout", "output_type": "stream", "text": "\nChanged Array:\n[[100011     12     13]\n [    21 100022     23]\n [    31     32 100033]\n [100041     42     43]]\n"}], "source": "# Change one element from each row using the indices selected\nan_array[row_indices, col_indices] += 100000\n\nprint('\\nChanged Array:')\nprint(an_array)"}, {"cell_type": "markdown", "metadata": {}, "source": "<p style=\"font-family: Arial; font-size:2.75em;color:purple; font-style:bold\"><br>\nBoolean Indexing\n\n<br><br></p>\n<p style=\"font-family: Arial; font-size:1.75em;color:#2462C0; font-style:bold\"><br>\n\nArray Indexing for changing elements:\n</p>"}, {"cell_type": "code", "execution_count": 27, "metadata": {"trusted": false}, "outputs": [{"name": "stdout", "output_type": "stream", "text": "[[11 12]\n [21 22]\n [31 32]]\n"}], "source": "# create a 3x2 array\nan_array = np.array([[11,12], [21, 22], [31, 32]])\nprint(an_array)"}, {"cell_type": "code", "execution_count": 28, "metadata": {"trusted": false}, "outputs": [{"data": {"text/plain": "array([[False, False],\n       [ True,  True],\n       [ True,  True]])"}, "execution_count": 28, "metadata": {}, "output_type": "execute_result"}], "source": "# create a filter which will be boolean values for whether each element meets this condition\nfilter = (an_array > 15)\nfilter"}, {"cell_type": "markdown", "metadata": {}, "source": "Notice that the filter is a same size ndarray as an_array which is filled with True for each element whose corresponding element in an_array which is greater than 15 and False for those elements whose value is less than 15."}, {"cell_type": "code", "execution_count": 29, "metadata": {"trusted": false}, "outputs": [{"name": "stdout", "output_type": "stream", "text": "[21 22 31 32]\n"}], "source": "# we can now select just those elements which meet that criteria\nprint(an_array[filter])"}, {"cell_type": "code", "execution_count": 30, "metadata": {"trusted": false}, "outputs": [{"data": {"text/plain": "array([21, 22, 31, 32])"}, "execution_count": 30, "metadata": {}, "output_type": "execute_result"}], "source": "# For short, we could have just used the approach below without the need for the separate filter array.\n\nan_array[an_array > 15]"}, {"cell_type": "markdown", "metadata": {}, "source": "What is particularly useful is that we can actually change elements in the array applying a similar logical filter.  Let's add 100 to all the even values."}, {"cell_type": "code", "execution_count": 31, "metadata": {"trusted": false}, "outputs": [{"name": "stdout", "output_type": "stream", "text": "[[ 11 112]\n [ 21 122]\n [ 31 132]]\n"}], "source": "an_array[an_array % 2 == 0] +=100\nprint(an_array)"}, {"cell_type": "markdown", "metadata": {}, "source": "<p style=\"font-family: Arial; font-size:2.75em;color:purple; font-style:bold\"><br>\n\nDatatypes and Array Operations\n<br><br></p>"}, {"cell_type": "markdown", "metadata": {}, "source": "<p style=\"font-family: Arial; font-size:1.75em;color:#2462C0; font-style:bold\"><br>\n\nDatatypes:\n</p>"}, {"cell_type": "code", "execution_count": 32, "metadata": {"trusted": false}, "outputs": [{"name": "stdout", "output_type": "stream", "text": "int64\n"}], "source": "ex1 = np.array([11, 12]) # Python assigns the  data type\nprint(ex1.dtype)"}, {"cell_type": "code", "execution_count": 33, "metadata": {"trusted": false}, "outputs": [{"name": "stdout", "output_type": "stream", "text": "float64\n"}], "source": "ex2 = np.array([11.0, 12.0]) # Python assigns the  data type\nprint(ex2.dtype)"}, {"cell_type": "code", "execution_count": 34, "metadata": {"trusted": false}, "outputs": [{"name": "stdout", "output_type": "stream", "text": "int64\n"}], "source": "ex3 = np.array([11, 21], dtype=np.int64) #You can also tell Python the  data type\nprint(ex3.dtype)"}, {"cell_type": "code", "execution_count": 35, "metadata": {"trusted": false}, "outputs": [{"name": "stdout", "output_type": "stream", "text": "int64\n\n[11 12]\n"}], "source": "# you can use this to force floats into integers (using floor function)\nex4 = np.array([11.1,12.7], dtype=np.int64)\nprint(ex4.dtype)\nprint()\nprint(ex4)"}, {"cell_type": "code", "execution_count": 36, "metadata": {"trusted": false}, "outputs": [{"name": "stdout", "output_type": "stream", "text": "float64\n\n[11. 21.]\n"}], "source": "# you can use this to force integers into floats if you anticipate\n# the values may change to floats later\nex5 = np.array([11, 21], dtype=np.float64)\nprint(ex5.dtype)\nprint()\nprint(ex5)"}, {"cell_type": "markdown", "metadata": {}, "source": "<p style=\"font-family: Arial; font-size:1.75em;color:#2462C0; font-style:bold\"><br>\n\nArithmetic Array Operations:\n\n</p>"}, {"cell_type": "code", "execution_count": 37, "metadata": {"trusted": false}, "outputs": [{"name": "stdout", "output_type": "stream", "text": "[[111 112]\n [121 122]]\n\n[[211.1 212.1]\n [221.1 222.1]]\n"}], "source": "x = np.array([[111,112],[121,122]], dtype=np.int)\ny = np.array([[211.1,212.1],[221.1,222.1]], dtype=np.float64)\n\nprint(x)\nprint()\nprint(y)"}, {"cell_type": "code", "execution_count": 38, "metadata": {"trusted": false}, "outputs": [{"name": "stdout", "output_type": "stream", "text": "[[322.1 324.1]\n [342.1 344.1]]\n\n[[322.1 324.1]\n [342.1 344.1]]\n"}], "source": "# add\nprint(x + y)         # The plus sign works\nprint()\nprint(np.add(x, y))  # so does the numpy function \"add\""}, {"cell_type": "code", "execution_count": 39, "metadata": {"trusted": false}, "outputs": [{"name": "stdout", "output_type": "stream", "text": "[[-100.1 -100.1]\n [-100.1 -100.1]]\n\n[[-100.1 -100.1]\n [-100.1 -100.1]]\n"}], "source": "# subtract\nprint(x - y)\nprint()\nprint(np.subtract(x, y))"}, {"cell_type": "code", "execution_count": 40, "metadata": {"trusted": false}, "outputs": [{"name": "stdout", "output_type": "stream", "text": "[[23432.1 23755.2]\n [26753.1 27096.2]]\n\n[[23432.1 23755.2]\n [26753.1 27096.2]]\n"}], "source": "# multiply\nprint(x * y)\nprint()\nprint(np.multiply(x, y))"}, {"cell_type": "code", "execution_count": 41, "metadata": {"trusted": false}, "outputs": [{"name": "stdout", "output_type": "stream", "text": "[[0.52581715 0.52805281]\n [0.54726368 0.54930212]]\n\n[[0.52581715 0.52805281]\n [0.54726368 0.54930212]]\n"}], "source": "# divide\nprint(x / y)\nprint()\nprint(np.divide(x, y))"}, {"cell_type": "code", "execution_count": 42, "metadata": {"trusted": false}, "outputs": [{"name": "stdout", "output_type": "stream", "text": "[[10.53565375 10.58300524]\n [11.         11.04536102]]\n"}], "source": "# square root\nprint(np.sqrt(x))"}, {"cell_type": "code", "execution_count": 43, "metadata": {"trusted": false}, "outputs": [{"name": "stdout", "output_type": "stream", "text": "[[1.60948707e+48 4.37503945e+48]\n [3.54513118e+52 9.63666567e+52]]\n"}], "source": "# exponent (e ** x)\nprint(np.exp(x))"}, {"cell_type": "markdown", "metadata": {}, "source": "<p style=\"font-family: Arial; font-size:2.75em;color:purple; font-style:bold\"><br>\n\nStatistical Methods, Sorting, and <br> <br> Set Operations:\n<br><br>\n</p>"}, {"cell_type": "markdown", "metadata": {}, "source": "<p style=\"font-family: Arial; font-size:1.75em;color:#2462C0; font-style:bold\"><br>\n\nBasic Statistical Operations:\n</p>"}, {"cell_type": "code", "execution_count": 44, "metadata": {"trusted": false}, "outputs": [{"name": "stdout", "output_type": "stream", "text": "[[ 2.20176557 -0.39574326 -2.71004473 -9.41696462  0.29897474]\n [-6.56398454  5.20033165  9.20173424  0.82776894 11.41114955]]\n"}], "source": "# setup a random 2 x 4 matrix\narr = 10 * np.random.randn(2,5)\nprint(arr)"}, {"cell_type": "code", "execution_count": 45, "metadata": {"trusted": false}, "outputs": [{"name": "stdout", "output_type": "stream", "text": "1.0054987538813207\n"}], "source": "# compute the mean for all elements\nprint(arr.mean())"}, {"cell_type": "code", "execution_count": 47, "metadata": {"trusted": false}, "outputs": [{"name": "stdout", "output_type": "stream", "text": "[-2.00440246  4.01539997]\n"}], "source": "# compute the means by row\nprint(arr.mean(axis = 1))"}, {"cell_type": "code", "execution_count": 48, "metadata": {"trusted": false}, "outputs": [{"name": "stdout", "output_type": "stream", "text": "[-2.18110949  2.4022942   3.24584476 -4.29459784  5.85506214]\n"}], "source": "# compute the means by column\nprint(arr.mean(axis = 0))"}, {"cell_type": "code", "execution_count": 49, "metadata": {"trusted": false}, "outputs": [{"name": "stdout", "output_type": "stream", "text": "10.054987538813208\n"}], "source": "# sum all the elements\nprint(arr.sum())"}, {"cell_type": "code", "execution_count": 50, "metadata": {"trusted": false}, "outputs": [{"name": "stdout", "output_type": "stream", "text": "[-0.39574326  5.20033165]\n"}], "source": "# compute the medians\nprint(np.median(arr, axis = 1))"}, {"cell_type": "markdown", "metadata": {}, "source": "<p style=\"font-family: Arial; font-size:1.75em;color:#2462C0; font-style:bold\"><br>\n\nSorting:\n</p>\n"}, {"cell_type": "code", "execution_count": null, "metadata": {"trusted": false}, "outputs": [], "source": "# create a 10 element array of randoms\nunsorted = np.random.randn(10)\n\nprint(unsorted)"}, {"cell_type": "code", "execution_count": null, "metadata": {"trusted": false}, "outputs": [], "source": "# create copy and sort\nsorted = np.array(unsorted)\nsorted.sort()\n\nprint(sorted)\nprint()\nprint(unsorted)"}, {"cell_type": "code", "execution_count": null, "metadata": {"trusted": false}, "outputs": [], "source": "# inplace sorting\nunsorted.sort() \n\nprint(unsorted)"}, {"cell_type": "markdown", "metadata": {}, "source": "<p style=\"font-family: Arial; font-size:1.75em;color:#2462C0; font-style:bold\"><br>\n\nFinding Unique elements:\n</p>"}, {"cell_type": "code", "execution_count": 51, "metadata": {"trusted": false}, "outputs": [{"name": "stdout", "output_type": "stream", "text": "[1 2 4]\n"}], "source": "array = np.array([1,2,1,4,2,1,4,2])\n\nprint(np.unique(array))"}, {"cell_type": "markdown", "metadata": {}, "source": "<p style=\"font-family: Arial; font-size:1.75em;color:#2462C0; font-style:bold\"><br>\n\nSet Operations with np.array data type:\n</p>"}, {"cell_type": "code", "execution_count": 52, "metadata": {"trusted": false}, "outputs": [{"name": "stdout", "output_type": "stream", "text": "['desk' 'chair' 'bulb'] ['lamp' 'bulb' 'chair']\n"}], "source": "s1 = np.array(['desk','chair','bulb'])\ns2 = np.array(['lamp','bulb','chair'])\nprint(s1, s2)"}, {"cell_type": "code", "execution_count": 53, "metadata": {"trusted": false}, "outputs": [{"name": "stdout", "output_type": "stream", "text": "['bulb' 'chair']\n"}], "source": "print( np.intersect1d(s1, s2) ) "}, {"cell_type": "code", "execution_count": 54, "metadata": {"trusted": false}, "outputs": [{"name": "stdout", "output_type": "stream", "text": "['bulb' 'chair' 'desk' 'lamp']\n"}], "source": "print( np.union1d(s1, s2) )"}, {"cell_type": "code", "execution_count": 55, "metadata": {"trusted": false}, "outputs": [{"name": "stdout", "output_type": "stream", "text": "['desk']\n"}], "source": "print( np.setdiff1d(s1, s2) )# elements in s1 that are not in s2"}, {"cell_type": "code", "execution_count": 56, "metadata": {"trusted": false}, "outputs": [{"name": "stdout", "output_type": "stream", "text": "[False  True  True]\n"}], "source": "print( np.in1d(s1, s2) )#which element of s1 is also in s2"}, {"cell_type": "markdown", "metadata": {}, "source": "<p style=\"font-family: Arial; font-size:2.75em;color:purple; font-style:bold\"><br>\n\nBroadcasting:\n<br><br>\n</p>"}, {"cell_type": "markdown", "metadata": {}, "source": "Introduction to broadcasting. <br>\nFor more details, please see: <br>\nhttps://docs.scipy.org/doc/numpy-1.10.1/user/basics.broadcasting.html"}, {"cell_type": "code", "execution_count": 60, "metadata": {"trusted": false}, "outputs": [{"name": "stdout", "output_type": "stream", "text": "[[0. 0. 0.]\n [0. 0. 0.]\n [0. 0. 0.]\n [0. 0. 0.]]\n"}], "source": "import numpy as np\n\nstart = np.zeros((4,3))\nprint(start)"}, {"cell_type": "code", "execution_count": 58, "metadata": {"trusted": false}, "outputs": [{"name": "stdout", "output_type": "stream", "text": "[1 0 2]\n"}], "source": "# create a rank 1 ndarray with 3 values\nadd_rows = np.array([1, 0, 2])\nprint(add_rows)"}, {"cell_type": "code", "execution_count": 59, "metadata": {"trusted": false}, "outputs": [{"name": "stdout", "output_type": "stream", "text": "[[1. 0. 2.]\n [1. 0. 2.]\n [1. 0. 2.]\n [1. 0. 2.]]\n"}], "source": "y = start + add_rows  # add to each row of 'start' using broadcasting\nprint(y)"}, {"cell_type": "code", "execution_count": 61, "metadata": {"trusted": false}, "outputs": [{"name": "stdout", "output_type": "stream", "text": "[[0]\n [1]\n [2]\n [3]]\n"}], "source": "# create an ndarray which is 4 x 1 to broadcast across columns\nadd_cols = np.array([[0,1,2,3]])\nadd_cols = add_cols.T\n\nprint(add_cols)"}, {"cell_type": "code", "execution_count": 62, "metadata": {"trusted": false}, "outputs": [{"name": "stdout", "output_type": "stream", "text": "[[0. 0. 0.]\n [1. 1. 1.]\n [2. 2. 2.]\n [3. 3. 3.]]\n"}], "source": "# add to each column of 'start' using broadcasting\ny = start + add_cols \nprint(y)"}, {"cell_type": "code", "execution_count": 63, "metadata": {"trusted": false}, "outputs": [{"name": "stdout", "output_type": "stream", "text": "[[1. 1. 1.]\n [1. 1. 1.]\n [1. 1. 1.]\n [1. 1. 1.]]\n"}], "source": "# this will just broadcast in both dimensions\nadd_scalar = np.array([1])  \nprint(start+add_scalar)"}, {"cell_type": "markdown", "metadata": {}, "source": "Example from the slides:"}, {"cell_type": "code", "execution_count": null, "metadata": {"trusted": false}, "outputs": [], "source": "# create our 3x4 matrix\narrA = np.array([[1,2,3,4],[5,6,7,8],[9,10,11,12]])\nprint(arrA)"}, {"cell_type": "code", "execution_count": null, "metadata": {"trusted": false}, "outputs": [], "source": "# create our 4x1 array\narrB = [0,1,0,2]\nprint(arrB)"}, {"cell_type": "code", "execution_count": null, "metadata": {"trusted": false}, "outputs": [], "source": "# add the two together using broadcasting\nprint(arrA + arrB)"}, {"cell_type": "markdown", "metadata": {}, "source": "<p style=\"font-family: Arial; font-size:2.75em;color:purple; font-style:bold\"><br>\n\nSpeedtest: ndarrays vs lists\n<br><br>\n</p>"}, {"cell_type": "markdown", "metadata": {}, "source": "First setup paramaters for the speed test. We'll be testing time to sum elements in an ndarray versus a list."}, {"cell_type": "code", "execution_count": null, "metadata": {"trusted": false}, "outputs": [], "source": "from numpy import arange\nfrom timeit import Timer\n\nsize    = 1000000\ntimeits = 1000"}, {"cell_type": "code", "execution_count": null, "metadata": {"trusted": false}, "outputs": [], "source": "# create the ndarray with values 0,1,2...,size-1\nnd_array = arange(size)\nprint( type(nd_array) )"}, {"cell_type": "code", "execution_count": null, "metadata": {"trusted": false}, "outputs": [], "source": "# timer expects the operation as a parameter, \n# here we pass nd_array.sum()\ntimer_numpy = Timer(\"nd_array.sum()\", \"from __main__ import nd_array\")\n\nprint(\"Time taken by numpy ndarray: %f seconds\" % \n      (timer_numpy.timeit(timeits)/timeits))"}, {"cell_type": "code", "execution_count": null, "metadata": {"trusted": false}, "outputs": [], "source": "# create the list with values 0,1,2...,size-1\na_list = list(range(size))\nprint (type(a_list) )"}, {"cell_type": "code", "execution_count": null, "metadata": {"trusted": false}, "outputs": [], "source": "# timer expects the operation as a parameter, here we pass sum(a_list)\ntimer_list = Timer(\"sum(a_list)\", \"from __main__ import a_list\")\n\nprint(\"Time taken by list:  %f seconds\" % \n      (timer_list.timeit(timeits)/timeits))"}, {"cell_type": "markdown", "metadata": {}, "source": "<p style=\"font-family: Arial; font-size:2.75em;color:purple; font-style:bold\"><br>\n\nRead or Write to Disk:\n<br><br>\n</p>"}, {"cell_type": "markdown", "metadata": {}, "source": "<p style=\"font-family: Arial; font-size:1.3em;color:#2462C0; font-style:bold\"><br>\n\nBinary Format:</p>"}, {"cell_type": "code", "execution_count": null, "metadata": {"trusted": false}, "outputs": [], "source": "x = np.array([ 23.23, 24.24] )"}, {"cell_type": "code", "execution_count": null, "metadata": {"trusted": false}, "outputs": [], "source": "np.save('an_array', x)"}, {"cell_type": "code", "execution_count": null, "metadata": {"trusted": false}, "outputs": [], "source": "np.load('an_array.npy')"}, {"cell_type": "markdown", "metadata": {}, "source": "<p style=\"font-family: Arial; font-size:1.3em;color:#2462C0; font-style:bold\"><br>\n\nText Format:</p>"}, {"cell_type": "code", "execution_count": null, "metadata": {"trusted": false}, "outputs": [], "source": "np.savetxt('array.txt', X=x, delimiter=',')"}, {"cell_type": "code", "execution_count": null, "metadata": {"trusted": false}, "outputs": [], "source": "## For Windows replace \"cat\" with \"type\"\n!cat array.txt"}, {"cell_type": "code", "execution_count": null, "metadata": {"scrolled": true, "trusted": false}, "outputs": [], "source": "np.loadtxt('array.txt', delimiter=',')"}, {"cell_type": "markdown", "metadata": {}, "source": "<p style=\"font-family: Arial; font-size:2.75em;color:purple; font-style:bold\"><br>\n\nAdditional Common ndarray Operations\n<br><br></p>"}, {"cell_type": "markdown", "metadata": {}, "source": "<p style=\"font-family: Arial; font-size:1.75em;color:#2462C0; font-style:bold\"><br>\n\nDot Product on Matrices and Inner Product on Vectors:\n\n</p>"}, {"cell_type": "code", "execution_count": 64, "metadata": {"trusted": false}, "outputs": [{"name": "stdout", "output_type": "stream", "text": "[[4 4]\n [4 4]]\n\n[[4 4]\n [4 4]]\n"}], "source": "# determine the dot product of two matrices\nx2d = np.array([[1,1],[1,1]])\ny2d = np.array([[2,2],[2,2]])\n\nprint(x2d.dot(y2d))\nprint()\nprint(np.dot(x2d, y2d))"}, {"cell_type": "code", "execution_count": 65, "metadata": {"trusted": false}, "outputs": [{"name": "stdout", "output_type": "stream", "text": "180\n\n180\n"}], "source": "# determine the inner product of two vectors\na1d = np.array([9 , 9 ])\nb1d = np.array([10, 10])\n\nprint(a1d.dot(b1d))\nprint()\nprint(np.dot(a1d, b1d))"}, {"cell_type": "code", "execution_count": 66, "metadata": {"trusted": false}, "outputs": [{"name": "stdout", "output_type": "stream", "text": "[18 18]\n\n[18 18]\n"}], "source": "# dot produce on an array and vector\nprint(x2d.dot(a1d))\nprint()\nprint(np.dot(x2d, a1d))"}, {"cell_type": "markdown", "metadata": {}, "source": "<p style=\"font-family: Arial; font-size:1.75em;color:#2462C0; font-style:bold\"><br>\n\nSum:\n</p>"}, {"cell_type": "code", "execution_count": null, "metadata": {"trusted": false}, "outputs": [], "source": "# sum elements in the array\nex1 = np.array([[11,12],[21,22]])\n\nprint(np.sum(ex1))          # add all members"}, {"cell_type": "code", "execution_count": null, "metadata": {"trusted": false}, "outputs": [], "source": "print(np.sum(ex1, axis=0))  # columnwise sum"}, {"cell_type": "code", "execution_count": null, "metadata": {"trusted": false}, "outputs": [], "source": "print(np.sum(ex1, axis=1))  # rowwise sum"}, {"cell_type": "markdown", "metadata": {}, "source": "<p style=\"font-family: Arial; font-size:1.75em;color:#2462C0; font-style:bold\"><br>\n\nElement-wise Functions: </p>\n\nFor example, let's compare two arrays values to get the maximum of each."}, {"cell_type": "code", "execution_count": null, "metadata": {"trusted": false}, "outputs": [], "source": "# random array\nx = np.random.randn(8)\nx"}, {"cell_type": "code", "execution_count": null, "metadata": {"trusted": false}, "outputs": [], "source": "# another random array\ny = np.random.randn(8)\ny"}, {"cell_type": "code", "execution_count": null, "metadata": {"trusted": false}, "outputs": [], "source": "# returns element wise maximum between two arrays\n\nnp.maximum(x, y)"}, {"cell_type": "markdown", "metadata": {}, "source": "<p style=\"font-family: Arial; font-size:1.75em;color:#2462C0; font-style:bold\"><br>\n\nReshaping array:\n</p>"}, {"cell_type": "code", "execution_count": null, "metadata": {"trusted": false}, "outputs": [], "source": "# grab values from 0 through 19 in an array\narr = np.arange(20)\nprint(arr)"}, {"cell_type": "code", "execution_count": null, "metadata": {"trusted": false}, "outputs": [], "source": "# reshape to be a 4 x 5 matrix\narr.reshape(4,5)"}, {"cell_type": "markdown", "metadata": {}, "source": "<p style=\"font-family: Arial; font-size:1.75em;color:#2462C0; font-style:bold\"><br>\n\nTranspose:\n\n</p>"}, {"cell_type": "code", "execution_count": null, "metadata": {"trusted": false}, "outputs": [], "source": "# transpose\nex1 = np.array([[11,12],[21,22]])\n\nex1.T"}, {"cell_type": "markdown", "metadata": {}, "source": "<p style=\"font-family: Arial; font-size:1.75em;color:#2462C0; font-style:bold\"><br>\n\nIndexing using where():</p>"}, {"cell_type": "code", "execution_count": null, "metadata": {"trusted": false}, "outputs": [], "source": "x_1 = np.array([1,2,3,4,5])\n\ny_1 = np.array([11,22,33,44,55])\n\nfilter = np.array([True, False, True, False, True])"}, {"cell_type": "code", "execution_count": null, "metadata": {"trusted": false}, "outputs": [], "source": "out = np.where(filter, x_1, y_1)\nprint(out)"}, {"cell_type": "code", "execution_count": null, "metadata": {"trusted": false}, "outputs": [], "source": "mat = np.random.rand(5,5)\nmat"}, {"cell_type": "code", "execution_count": null, "metadata": {"trusted": false}, "outputs": [], "source": "np.where( mat > 0.5, 1000, -1)"}, {"cell_type": "markdown", "metadata": {}, "source": "<p style=\"font-family: Arial; font-size:1.75em;color:#2462C0; font-style:bold\"><br>\n\n\"any\" or \"all\" conditionals:</p>"}, {"cell_type": "code", "execution_count": null, "metadata": {"trusted": false}, "outputs": [], "source": "arr_bools = np.array([ True, False, True, True, False ])"}, {"cell_type": "code", "execution_count": null, "metadata": {"trusted": false}, "outputs": [], "source": "arr_bools.any()"}, {"cell_type": "code", "execution_count": null, "metadata": {"scrolled": true, "trusted": false}, "outputs": [], "source": "arr_bools.all()"}, {"cell_type": "markdown", "metadata": {}, "source": "<p style=\"font-family: Arial; font-size:1.75em;color:#2462C0; font-style:bold\"><br>\n\nRandom Number Generation:\n</p>"}, {"cell_type": "code", "execution_count": null, "metadata": {"trusted": false}, "outputs": [], "source": "Y = np.random.normal(size = (1,5))[0]\nprint(Y)"}, {"cell_type": "code", "execution_count": null, "metadata": {"trusted": false}, "outputs": [], "source": "Z = np.random.randint(low=2,high=50,size=4)\nprint(Z)"}, {"cell_type": "code", "execution_count": null, "metadata": {"trusted": false}, "outputs": [], "source": "np.random.permutation(Z) #return a new ordering of elements in Z"}, {"cell_type": "code", "execution_count": null, "metadata": {"trusted": false}, "outputs": [], "source": "np.random.uniform(size=4) #uniform distribution"}, {"cell_type": "code", "execution_count": null, "metadata": {"trusted": false}, "outputs": [], "source": "np.random.normal(size=4) #normal distribution"}, {"cell_type": "markdown", "metadata": {}, "source": "<p style=\"font-family: Arial; font-size:1.75em;color:#2462C0; font-style:bold\"><br>\n\nMerging data sets:\n</p>"}, {"cell_type": "code", "execution_count": null, "metadata": {"trusted": false}, "outputs": [], "source": "K = np.random.randint(low=2,high=50,size=(2,2))\nprint(K)\n\nprint()\nM = np.random.randint(low=2,high=50,size=(2,2))\nprint(M)"}, {"cell_type": "code", "execution_count": null, "metadata": {"trusted": false}, "outputs": [], "source": "np.vstack((K,M))"}, {"cell_type": "code", "execution_count": null, "metadata": {"trusted": false}, "outputs": [], "source": "np.hstack((K,M))"}, {"cell_type": "code", "execution_count": null, "metadata": {"trusted": false}, "outputs": [], "source": "np.concatenate([K, M], axis = 0)"}, {"cell_type": "code", "execution_count": null, "metadata": {"trusted": false}, "outputs": [], "source": "np.concatenate([K, M.T], axis = 1)"}, {"cell_type": "code", "execution_count": null, "metadata": {"trusted": false}, "outputs": [], "source": ""}], "metadata": {"kernelspec": {"display_name": "Python 3", "language": "python", "name": "python3"}, "language_info": {"codemirror_mode": {"name": "ipython", "version": 3}, "file_extension": ".py", "mimetype": "text/x-python", "name": "python", "nbconvert_exporter": "python", "pygments_lexer": "ipython3", "version": "3.7.4"}}, "nbformat": 4, "nbformat_minor": 2}, "format": "json", "mimetype": null, "size": 45623, "writable": true, "type": "notebook"}åŸ»      _jÁ≥_jÁ≥B#pº_t"3   ¢    :http://localhost:8888/api/contents/%D0%97%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B8/23-09-2020_09-05-29/2_5420530662090213561.ipynb?type=notebook&_=1600841650870 necko:classified 1 strongly-framed 1 request-method GET response-head HTTP/1.1 200 OK
Server: TornadoServer/6.0.4
Content-Type: application/json
Date: Wed, 23 Sep 2020 06:14:11 GMT
X-Content-Type-Options: nosniff
Content-Security-Policy: frame-ancestors 'self'; report-uri /api/security/csp-report; default-src 'none'
Last-Modified: Thu, 29 Nov 1979 21:00:00 GMT
Etag: "4c3cee5b4a065628340a17578adec98b5d9793c3"
Content-Length: 36673
 original-response-headers Server: TornadoServer/6.0.4
Content-Type: application/json
Date: Wed, 23 Sep 2020 06:14:11 GMT
X-Content-Type-Options: nosniff
Content-Security-Policy: frame-ancestors 'self'; report-uri /api/security/csp-report; default-src 'none'
Last-Modified: Thu, 29 Nov 1979 21:00:00 GMT
Etag: "4c3cee5b4a065628340a17578adec98b5d9793c3"
Content-Length: 36673
 ctid 1 net-response-time-onstart 149 net-response-time-onstop 149   èA